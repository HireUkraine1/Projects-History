function countChecked(){"all"===checkState&&$(".bulk_action input[name='table_records']").iCheck("check"),"none"===checkState&&$(".bulk_action input[name='table_records']").iCheck("uncheck");var e=$(".bulk_action input[name='table_records']:checked").length;e?($(".column-title").hide(),$(".bulk-actions").show(),$(".action-cnt").html(e+" Records Selected")):($(".column-title").show(),$(".bulk-actions").hide())}!function(e,t){var a=function(e,t,a){var n;return function(){var i=this,o=arguments;n?clearTimeout(n):a&&e.apply(i,o),n=setTimeout(function(){a||e.apply(i,o),n=null},t||100)}};jQuery.fn[t]=function(e){return e?this.bind("resize",a(e)):this.trigger(t)}}(jQuery,"smartresize"),$(document).ready(function(){if($("#critical-datatable").length>0){var e=$("#critical-datatable").DataTable({processing:!0,serverSide:!0,ajax:"/adminpanel/critical-css",columns:[{data:"id"},{data:"created_at"},{data:"page.url"},{data:"status"}],order:[[1,"desc"]]});$("#critical-compile-update").click(function(){e.draw()}),$("#critical-generate").click(function(e){var t={resolutions:$("#resolutions").val(),routes:$("#routes").val(),process:$("#process_all").is(":checked")};$.get("/adminpanel/critical-css/generate",t,function(e){}),swal($(e.target).data("success"))})}});var CURRENT_URL=window.location.href.split("#")[0].split("?")[0],$BODY=$("body"),$MENU_TOGGLE=$("#menu_toggle"),$SIDEBAR_MENU=$("#sidebar-menu"),$SIDEBAR_FOOTER=$(".sidebar-footer"),$LEFT_COL=$(".left_col"),$RIGHT_COL=$(".right_col"),$NAV_MENU=$(".nav_menu"),$FOOTER=$("footer");$(document).ready(function(){var e=function(){$RIGHT_COL.css("min-height",$(window).height());var e=$BODY.outerHeight(),t=$BODY.hasClass("footer_fixed")?-10:$FOOTER.height(),a=$LEFT_COL.eq(1).height()+$SIDEBAR_FOOTER.height(),n=e<a?a:e;n-=$NAV_MENU.height()+t,$RIGHT_COL.css("min-height",n)};$SIDEBAR_MENU.find("a").on("click",function(t){var a=$(this).parent();a.is(".active")?(a.removeClass("active active-sm"),$("ul:first",a).slideUp(function(){e()})):(a.parent().is(".child_menu")||($SIDEBAR_MENU.find("li").removeClass("active active-sm"),$SIDEBAR_MENU.find("li ul").slideUp()),a.addClass("active"),$("ul:first",a).slideDown(function(){e()}))}),$MENU_TOGGLE.on("click",function(){$BODY.hasClass("nav-md")?($SIDEBAR_MENU.find("li.active ul").hide(),$SIDEBAR_MENU.find("li.active").addClass("active-sm").removeClass("active")):($SIDEBAR_MENU.find("li.active-sm ul").show(),$SIDEBAR_MENU.find("li.active-sm").addClass("active").removeClass("active-sm")),$BODY.toggleClass("nav-md nav-sm"),e(),$(".dataTable").each(function(){$(this).dataTable().fnDraw()})}),$SIDEBAR_MENU.find('a[href="'+CURRENT_URL+'"]').parent("li").addClass("current-page"),$SIDEBAR_MENU.find("a").filter(function(){return this.href==CURRENT_URL}).parent("li").addClass("current-page").parents("ul").slideDown(function(){e()}).parent().addClass("active"),$(window).smartresize(function(){e()}),e(),$.fn.mCustomScrollbar&&$(".menu_fixed").mCustomScrollbar({autoHideScrollbar:!0,theme:"minimal",mouseWheel:{preventDefault:!0}})}),$(document).ready(function(){$(".collapse-link").on("click",function(){var e=$(this).closest(".x_panel"),t=$(this).find("i"),a=e.find(".x_content");e.attr("style")?a.slideToggle(200,function(){e.removeAttr("style")}):(a.slideToggle(200),e.css("height","auto")),t.toggleClass("fa-chevron-up fa-chevron-down")}),$(".close-link").click(function(){$(this).closest(".x_panel").remove()})}),$(document).ready(function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})}),$(document).ready(function(){$(".progress .progress-bar")[0]&&$(".progress .progress-bar").progressbar()}),$(document).ready(function(){$(".js-switch")[0]&&Array.prototype.slice.call(document.querySelectorAll(".js-switch")).forEach(function(e){new Switchery(e,{color:"#26B99A"})})}),$(document).ready(function(){$("input.flat")[0]&&$(document).ready(function(){$("input.flat").iCheck({checkboxClass:"icheckbox_flat-green",radioClass:"iradio_flat-green"})})}),$("table input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$("table input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()});var checkState="";$(".bulk_action input").on("ifChecked",function(){checkState="",$(this).parent().parent().parent().addClass("selected"),countChecked()}),$(".bulk_action input").on("ifUnchecked",function(){checkState="",$(this).parent().parent().parent().removeClass("selected"),countChecked()}),$(".bulk_action input#check-all").on("ifChecked",function(){checkState="all",countChecked()}),$(".bulk_action input#check-all").on("ifUnchecked",function(){checkState="none",countChecked()}),$(document).ready(function(){$(".expand").on("click",function(){$(this).next().slideToggle(200),$expand=$(this).find(">:first-child"),"+"==$expand.text()?$expand.text("-"):$expand.text("+")})}),"undefined"!=typeof NProgress&&($(document).ready(function(){NProgress.start()}),$(window).on("load",function(){NProgress.done()})),$(document).ready(function(){function e(e,t){var a="";return $.each(e,function(e,n){if(Array.isArray(n))for(error in n)a+=1===t?"<p>"+n[error]+"</p>":n[error]+"\n"}),a}function t(e){for(;$(e).outerHeight()<e.scrollHeight+parseFloat($(e).css("borderTopWidth"))+parseFloat($(e).css("borderBottomWidth"));)$(e).height($(e).height()+1)}$(".textarea").each(function(){t(this)}),$(document).on("keyup",".domain-page .textarea",function(){t(this)}),$(".domain-page #create_domain").on("click",function(){$.ajax({type:"GET",url:"/adminpanel/domain/create",success:function(e){$("#modal-window").html(e),$("#modal-window").modal("show")},error:function(e){swal(e.responseText)}})}),$(document).on("click",".domain-page #safe-domain",function(a){var n=$(a.target),i=$("#form-create-domain").serialize();$.ajax({type:"POST",url:"/adminpanel/domain",data:i,dataType:"json",success:function(e){1==e.master&&$('.domain-page input[name="master"]:checked').trigger("click"),$("#domains").append(e.view);var a=document.querySelector(".domain-page #main-domain"+e.id);new Switchery(a,{color:"#26B99A"});$("#modal-window").modal("hide"),$(".textarea").each(function(){t(this)}),swal(n.data("trans-success"))},error:function(t){if(422==t.status){var a=e(t.responseJSON,1);$("#error").removeClass("hide"),$("#error").html(a)}else swal(t.responseText)}})}),$(document).on("click",".domain-page .update-action",function(t){var a=$(this).data("id"),n=$(t.target),i=$(".domain-page #domain_"+a).serialize();swal({title:n.data("trans-question"),type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){$.ajax({type:"PUT",url:"/adminpanel/domain/"+a,data:i,dataType:"json",success:function(e){1==e.master&&$('.domain-page input[name="master"]:checked').not(".domain-page #main-domain"+a).trigger("click"),swal(n.data("trans-success"))},error:function(t){if(422==t.status){var a=e(t.responseJSON);swal(a)}else swal(t.responseText)}})})}),$(document).on("click",".domain-page .delete-action",function(e){var t=$(this).data("id"),a=$(e.target),n=$(".domain-page #domain_"+t+' > input[name="_token"]').val();swal({title:a.data("trans-question"),type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){$.ajax({type:"DELETE",url:"/adminpanel/domain/"+t,data:{_token:n},success:function(e){$(".domain-page #domain_"+t).remove(),swal(a.data("trans-success"))},error:function(e){swal(e.responseText)}})})})}),$(document).ready(function(){function e(){$("#form-create-page").length>0?l=!0:s=!0,$("#template-create-block").show(),$("#template-chose").hide(),$("#template-create").hide(),editAreaLoader.init({id:"t-body",start_highlight:!0,allow_resize:"no",allow_toggle:!0,language:"ru",syntax:"html",show_line_colors:!0})}function t(){$("#form-create-page").length>0?l=!1:s=!1,$("#template-create-block").hide(),$("#template-chose").show(),$("#template-create").show()}function a(){$("#template_id").select2({ajax:{url:"/adminpanel/template",dataType:"json",delay:250,data:function(e){return{draw:e.page?e.page:1,"columns[0][data]":"id","columns[0][name]":"","columns[0][searchable]":!0,"columns[0][orderable]":!0,"columns[0][search][value]":"","columns[0][search][regex]":!1,"columns[1][data]":"name","columns[1][name]":"","columns[1][searchable]":!0,"columns[1][orderable]":!0,"columns[1][search][value]":"","columns[1][search][regex]":!1,start:e.page>1?10*(e.page-1):0,length:10,"search[value]":e.term,"search[regex]":!1}},processResults:function(e,t){return t.page=t.page||1,{results:e.data,pagination:{more:10*t.page<e.recordsTotal}}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1,templateResult:function(e){return e.loading?e.text:e.name},templateSelection:function(e){return $("#template-edit").attr("href","/adminpanel/template/"+e.id+"/edit").show(),e.name||e.text},width:"100%"})}function n(e,a,n,r){var l={};l._token=$("#template-create-block").find('[name="_token"]').val(),l.name=$("#template-create-block").find('[name="name"]').val(),l.virtualroot=$("#template-create-block").find('[name="virtualroot"]').val(),l.body=$("#template-create-block").find('[name="body"]').val(),$.post("/adminpanel/template",l).success(function(c){c=JSON.parse(c),$.get("/adminpanel/template/"+c.id,function(c){t();var l=new Option(c.name,c.id,!0,!0);$("#template_id").append(l).trigger("change");var s=i(a);s.create_template=n,o(e,s,r)})}).fail(function(e){if(422===e.status){var t=c(e.responseJSON,1);$("#error").removeClass("hide").html(t)}else swal(e.responseText)})}function i(e){var t={};return(method=e.find('[name="_method"]').val())&&(t._method=method),t._token=e.find('[name="_token"]').val(),t.url=e.find('[name="url"]').val(),t.h1=e.find('[name="h1"]').val(),t.title=e.find('[name="title"]').val(),t.description=e.find('[name="description"]').val(),t.keywords=e.find('[name="keywords"]').val(),t.template_id=e.find('[name="template_id"]').val(),t.sitemappriority=e.find('[name="sitemappriority"]').val(),t.criticalcss=e.find('[name="criticalcss"]').val(),t.active=e.find('[name="active"]').is(":checked"),t}function o(e,t,a){$.post(e,t,function(e){$("#modal-window").modal("toggle"),d.draw()}).success(function(e){swal($(a.target).data("trans-success"))}).fail(function(e){if(422===e.status){var t=c(e.responseJSON,1);$("#error").removeClass("hide").html(t)}else swal(e.responseText)})}function r(e){$.get(e,function(e){$("#modal-window").html(e),$("#modal-window").modal("toggle"),a()}).fail(function(e){swal(e.responseText)})}function c(e,t){var a="";return $.each(e,function(e,n){if(Array.isArray(n))for(error in n)a+=1===t?"<p>"+n[error]+"</p>":n[error]+"\n"}),a}$.fn.modal.Constructor.prototype.enforceFocus=function(){};var l=!1,s=!1;if($("#page-datatable").length>0){$(document).on("click","#template-create",function(){e()}),$(document).on("click","#template-cancel",function(){t()});var d=$("#page-datatable").DataTable({processing:!0,serverSide:!0,ajax:"/adminpanel/page",columns:[{data:"id"},{data:"url"},{data:"h1"},{data:"title"},{data:"template"},{data:"action"}]})}$("#create_page").on("click",function(){r("/adminpanel/page/create")}),$("#page-datatable").on("click",".edit",function(e){r("/adminpanel/page/"+$(e.target).data("page-id")+"/edit")}),$(document).on("click","#save-page",function(e){$("textarea#criticalcss").val(editAreaLoader.getValue("criticalcss")),$("textarea#t-body").val(editAreaLoader.getValue("t-body"));var t=$("#form-create-page");if(l)return n("/adminpanel/page",t,l,e);var a=i(t);return a.create_template=l,o("/adminpanel/page",a,e)}),$("#modal-window").on("click","#update-page",function(e){$("textarea#criticalcss").val(editAreaLoader.getValue("criticalcss")),$("textarea#t-body").val(editAreaLoader.getValue("t-body"));var t=$("#form-edit-page"),a="/adminpanel/page/"+t.data("page-id");if(s)return n(a,t,s,e);var r=i(t);return r.create_template=s,o(a,r,e)}),$("#page-datatable").on("click",".delete",function(e){var t=$(e.target),a=t.data("page-id"),n=$("meta[name='_token']").attr("content");swal({title:t.data("trans-question"),type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){var e={_token:n,_method:"DELETE"};$.post("/adminpanel/page/"+a,e,function(e){d.draw(),swal(t.data("trans-success"))}).fail(function(e){swal(e.responseText)})})}),$("#admin-pagecreation #modal-window").on("hidden.bs.modal",function(e){editAreaLoader.delete_instance("criticalcss")}),$("#admin-pagecreation #modal-window").on("show.bs.modal",function(e){setTimeout(function(){editAreaLoader.init({id:"criticalcss",start_highlight:!0,allow_resize:"no",allow_toggle:!0,language:"ru",syntax:"css",show_line_colors:!0})},500)})}),$(document).ready(function(){function e(e,t,i){$.post(e,t,function(e){$("#modal-window").modal("toggle"),n.draw()}).success(function(e){swal(i.data("trans-success"))}).fail(function(e){if(422===e.status){var t=a(e.responseJSON,1);$("#error").removeClass("hide").html(t)}else swal(e.responseText)})}function t(e){$.get(e,function(e){$("#modal-window").html(e),$("#modal-window").modal("toggle")}).fail(function(e){swal(e.responseText)})}function a(e,t){var a="";return $.each(e,function(e,n){if(Array.isArray(n))for(error in n)a+=1===t?"<p>"+n[error]+"</p>":n[error]+"\n"}),a}if($("#redirect-datatable").length>0)var n=$("#redirect-datatable").DataTable({processing:!0,serverSide:!0,ajax:"/adminpanel/redirect",columns:[{data:"id"},{data:"oldurl"},{data:"newurl"},{data:"coderedirect"},{data:"action"}]});$("#create_redirect").on("click",function(){t("/adminpanel/redirect/create")}),$("#redirect-datatable").on("click",".edit",function(e){t("/adminpanel/redirect/"+$(e.target).data("redirect-id")+"/edit")}),$(document).on("click","#save-redirect",function(t){e("/adminpanel/redirect",$("#form-create-redirect").serialize(),$(t.target))}),$("#modal-window").on("click","#update-redirect",function(t){var a=$("#form-edit-redirect"),n=$(t.target);e("/adminpanel/redirect/"+a.data("redirect-id"),a.serialize(),n)}),$("#redirect-datatable").on("click",".delete",function(e){var t=$(e.target),a=t.data("redirect-id"),i=$("meta[name='_token']").attr("content");swal({title:t.data("trans-question"),type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){var e={_token:i,_method:"DELETE"};$.post("/adminpanel/redirect/"+a,e,function(e){n.draw(),swal(t.data("trans-success"))}).fail(function(e){swal(e.responseText)})})})}),$(document).ready(function(){function e(e){$.get(e,function(e){$("#modal-window").html(e),$("#modal-window").modal("toggle")}).fail(function(e){swal(e.responseText)})}function t(e,t,i){$.post(e,t,function(e){$("#modal-window").modal("toggle"),n.draw()}).success(function(e){swal(i.data("trans-success"))}).fail(function(e){if(422===e.status){var t=a(e.responseJSON,1);$("#error").removeClass("hide").html(t)}else swal(e.responseText)})}function a(e,t){var a="";return $.each(e,function(e,n){if(Array.isArray(n))for(error in n)a+=1===t?"<p>"+n[error]+"</p>":n[error]+"\n"}),a}if($("#template-datatable").length>0)var n=$("#template-datatable").DataTable({processing:!0,serverSide:!0,ajax:"/adminpanel/template",columns:[{data:"id"},{data:"name"},{data:"virtualroot"},{data:"action"}]});$("#create_template").on("click",function(){e("/adminpanel/template/create")}),$(document).on("click","#save-template",function(e){$("textarea#t-body").val(editAreaLoader.getValue("t-body")),t("/adminpanel/template",$("#form-create-template").serialize(),$(e.target))}),$("#template-datatable").on("click",".edit",function(t){var a=$(t.target).data("template-id");e("/adminpanel/template/"+a+"/edit")}),$("#modal-window").on("click","#update-template",function(e){$("textarea#t-body").val(editAreaLoader.getValue("t-body"));var a=$("#form-edit-template"),n=$(e.target);t("/adminpanel/template/"+a.data("template-id"),a.serialize(),n)}),$("#template-datatable").on("click",".delete",function(e){var t=$(e.target),a=t.data("template-id"),i=$("meta[name='_token']").attr("content");swal({title:t.data("trans-question"),type:"info",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){var e={_token:i,_method:"DELETE"};$.post("/adminpanel/template/"+a,e,function(e){n.draw(),swal(t.data("trans-success"))}).fail(function(e){swal(e.responseText)})})}),$("#admin-template-page #modal-window").on("hidden.bs.modal",function(e){editAreaLoader.delete_instance("t-body")}),$("#admin-template-page #modal-window").on("show.bs.modal",function(e){setTimeout(function(){editAreaLoader.init({id:"t-body",start_highlight:!0,allow_resize:"no",allow_toggle:!0,language:"ru",syntax:"html",show_line_colors:!0})},500)})});